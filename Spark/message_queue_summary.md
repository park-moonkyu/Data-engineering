대표적인 메시지 큐에는 스파크(Spark) , RabbitMQ 가 있다.


메세지 큐의 특징

메인 목적 -> 분산 PUB / SUB 메세징 시스템

생성자들이 메시지를 큐에 보낸다

구독자들이 흥미 있어하는 메시지를 읽는다.

또한 분산 시스템은 확장 가능하며 신뢰성 있다.

​

•비동기 (Asynchronous) : Queue에 넣기 때문에 나중에 처리 가능

•비동조 (Decoupling) : 애플리케이션과 분리

•탄력성 (Resilience) : 일부가 실패 시 전체에 영향을 받지 않음

•과잉 (Redundancy) : 실패할 경우 재실행 가능

•보증 (Guarantees) : 작업이 처리된 걸 확인 가능

•확장성 (Scalable) : 다수의 프로세스들이 큐에 메시지를 보낼 수 있음

​

그렇게 메세지큐에는 Message Broker와 Event Broker로 나누어진다.

대표적으로 Message broker는 RabbitMQ 이며 RabbitMQ와 Redis를 함께 많이 사용한다.

Event Broker의 경우 Kafka가 있다.

​

​

메시지 브로커

메시지 브로커는 publisher가 생산한 메시지를 메시지 큐에 저장하고, 

저장된 데이터를 consumer가 가져갈 수 있도록 중간 다리 역할을 해주는 브로커(broker)라고 볼 수 있다

보통 서로 다른 시스템(혹은 소프트웨어) 사이에서 데이터를 비동기 형태로 처리하기 위해 사용한다

​

이러한 구조를 보통 pub/sub 구조라고 하며 대표적으로 RabbitMQ 소프트웨어가 있고 GCP의 pubsub, AWS의 SQS 가 있다.

메시지 브로커들은 consumer가 큐에서 데이터를 가져가게 되면 즉시 혹은 짧은 시간 내에 큐에서 데이터가 삭제되는 특징이 있다.

​

이벤트 브로커

이벤트 브로커는 기본적으로 메시지 브로커의 큐 기능들을 가지고 있다.

그래서 이벤트 브로커는 메세지 브로커의 역할을 할 수 있지만 메시지 브로커는 이벤트 브로커의 역할을 할 수 없습니다.

이벤트 브로커는 publisher가 생산한 이벤트를 데이터베이스에 저장하듯이 계속 저장하여, 

추후에 consumer가 특정 시점부터 이벤트를 다시 읽어갈 수 있습니다.

대용량 데이터 처리에 있어 메시지 브로커보다 더 많은 양의 데이터를 처리 가능하다

또한 데이터를 시퀀스 하게 저장하기 때문에 데이터를 가져올 때 빠른 특징이 있다.

​

​

​

Message Broker


메시지 브로커는 이벤트 브로커로 역할을 할 수 없다.

이벤트 브로커는 메시지 브로커로 역할을 할 수 있다.

메시지 브로커는 대규모 데이터 미들웨어 아키텍처에서 사용되어 진다.

미들웨어 아키텍처 : 서비스 애플리케이션들을 보다 효율적인 아키텍처로 연결하는 요소들로 작동하는 소프트웨어

프로듀서와 컨슈머를 통해 메신저를 통신하고 네트워크를 맺는다.

메시지를 처리하고 나면 즉시 또는 짧은 시간내에 삭제

데이터를 보내고 처리하고 삭제

​

​

Event Broker​


메시지 브로커는 이벤트 브로커로 역할을 할 수 없다.

이벤트 브로커는 메시지 브로커로 역할을 할 수 있다.

이벤트 또는 메시지라고 불리는 레코드를 하나만 보관

인덱스를 통해 개별 액세스를 관리

업무상 필요한 시간동안 이벤트 보존 가능

데이터를 보내고 처리하고 삭제하지 않는다 à이벤트 브로커의 Queue에 저장

 

1.장애발생 시 장애발생지점부터 재처리 가능

2.많은 양의 실시간 데이터 스트림을 효과적으로 처리

3.MSA 아키텍처에서 중요한 역할